/*
** CAMPOS DO CLIENTE
*/

ALTER TABLE CLIENTES ADD ENTREGA1 STR60;

ALTER TABLE CLIENTES ADD ENTREGA2 STR60;

ALTER TABLE CLIENTES ADD RESIDENCIA_TEMPO STR20;

ALTER TABLE CLIENTES ADD ALUGUEL SIMNAO;

SET TERM ^ ;

ALTER TRIGGER clientes_docupd
inactive before update position 0
AS
DECLARE VARIABLE RETORNO INTEGER;
BEGIN

  EXECUTE PROCEDURE VALIDA_CPF(NEW.CPF)
    RETURNING_VALUES RETORNO;

  IF (RETORNO = 0) THEN
    EXCEPTION CPF_ERRADO;

  EXECUTE PROCEDURE VALIDA_CNPJ(NEW.CGC)
    RETURNING_VALUES RETORNO;

  IF (RETORNO = 0) THEN
    EXCEPTION CGC_ERRADO;

END
^

SET TERM ; ^

SET TERM ^ ;

ALTER TRIGGER cliente_familia_update
inactive before update position 0
AS
BEGIN
  /* NOME DE FAMILIA */
  IF (NEW.PESSOAFISICA = 'F') THEN
     EXECUTE PROCEDURE FAMILIA(NEW.NOME)
       RETURNING_VALUES NEW.NOME_FAMILIA;
  ELSE
     NEW.NOME_FAMILIA = NEW.NOME;
END
^

SET TERM ; ^

UPDATE 
  CLIENTES 
SET 
  ALUGUEL = 'N';

ALTER TABLE CLIENTES ADD ALUGUEL_VALOR DINHEIRO;

UPDATE 
  CLIENTES
SET 
  ALUGUEL_VALOR = 0;

ALTER TABLE CLIENTES ADD TRAB_SALARIO DINHEIRO;

UPDATE 
  CLIENTES
SET 
  TRAB_SALARIO = 0;

ALTER TABLE CLIENTES ADD CONJ_SALARIO DINHEIRO;

UPDATE 
  CLIENTES
SET 
  CONJ_SALARIO = 0;

SET TERM ^ ;

ALTER TRIGGER cliente_familia_update
active before update position 0
AS
BEGIN
  /* NOME DE FAMILIA */
  IF (NEW.PESSOAFISICA = 'F') THEN
     EXECUTE PROCEDURE FAMILIA(NEW.NOME)
       RETURNING_VALUES NEW.NOME_FAMILIA;
  ELSE
     NEW.NOME_FAMILIA = NEW.NOME;
END
^

SET TERM ; ^

SET TERM ^ ;

ALTER TRIGGER clientes_docupd
active before update position 0
AS
DECLARE VARIABLE RETORNO INTEGER;
BEGIN

  EXECUTE PROCEDURE VALIDA_CPF(NEW.CPF)
    RETURNING_VALUES RETORNO;

  IF (RETORNO = 0) THEN
    EXCEPTION CPF_ERRADO;

  EXECUTE PROCEDURE VALIDA_CNPJ(NEW.CGC)
    RETURNING_VALUES RETORNO;

  IF (RETORNO = 0) THEN
    EXCEPTION CGC_ERRADO;

END
^

SET TERM ; ^

ALTER TABLE CLIENTES ADD TRAB_EMPRESA STR60;

ALTER TABLE CLIENTES ADD TRAB_ADMISSAO DATADIA;

ALTER TABLE CLIENTES ADD TRAB_ENDERECO STR60;

ALTER TABLE CLIENTES ADD TRAB_CIDADE STR40;

ALTER TABLE CLIENTES ADD TRAB_FONE STR20;

ALTER TABLE CLIENTES ADD TRAB_CARGO STR20;

ALTER TABLE CLIENTES ADD CONJ_NOME STR60;

ALTER TABLE CLIENTES ADD CONJ_DATANASC DATADIA;

ALTER TABLE CLIENTES ADD CONJ_RG STR30;

ALTER TABLE CLIENTES ADD CONJ_CPF STR20;

ALTER TABLE CLIENTES ADD CONJ_CARTEIRA STR20;

ALTER TABLE CLIENTES ADD CONJ_EMPRESA STR60;

ALTER TABLE CLIENTES ADD CONJ_ADMISSAO DATADIA;

ALTER TABLE CLIENTES ADD CONJ_CARGO STR20;

ALTER TABLE CLIENTES ADD CONJ_ENDERECO STR60;

ALTER TABLE CLIENTES ADD CONJ_FONE STR20;

ALTER TABLE CLIENTES ADD CARTEIRA STR20;

ALTER TABLE CLIENTES ADD REFERENCIA1 STR60;

ALTER TABLE CLIENTES ADD REFERENCIA2 STR60;

ALTER TABLE CLIENTES ADD REFERENCIA3 STR60;

INSERT INTO SCRIPTVER(NUMERO, DATA) VALUES (418, CURRENT_TIMESTAMP);
COMMIT;
